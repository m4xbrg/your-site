---
const {
  tags = [],
  variant = 'light',
  class: className = '',
} = Astro.props as {
  tags?: string[]
  variant?: 'light' | 'dark'
  class?: string
}

const normalizedTags = Array.isArray(tags)
  ? tags.map((tag) => (typeof tag === 'string' ? tag.trim() : '')).filter(Boolean)
  : []

const variantStyles: Record<string, string> = {
  light: 'bg-gray-100 text-gray-700 border-gray-200 hover:bg-gray-200 hover:text-gray-900',
  dark: 'bg-white/10 text-white border-white/20 hover:bg-white/20',
}

const chipStyles = variantStyles[variant] ?? variantStyles.light
const wrapperClass = ['flex flex-wrap gap-2', className].filter(Boolean).join(' ')
---
{normalizedTags.length > 0 && (
  <div class={wrapperClass}>
    {normalizedTags.map((tag) => {
      const slug = encodeURIComponent(tag)
      return (
        <a
          class={`inline-flex items-center rounded-full border px-3 py-1 text-xs font-medium transition-colors duration-150 ${chipStyles}`}
          href={`/tags/${slug}/`}
          aria-label={`Browse ${tag} content`}
        >
          #{tag}
        </a>
      )
    })}
  </div>
)}
