---
export interface Problem {
  id?: string
  label?: string
  title?: string
  difficulty?: string
  topics?: string[]
  prompt: string
  solution?: string
}

const { problems } = Astro.props as { problems: Problem[] }
---

{problems && problems.length > 0 && (
  <section class="mb-10">
    <header class="mb-3 flex items-center justify-between gap-2">
      <h2 class="text-lg font-semibold">Problems overview</h2>
      <p class="text-xs text-gray-500">
        {problems.length} problem{problems.length === 1 ? "" : "s"}
      </p>
    </header>

    <ol class="space-y-4">
      {problems.map((p, idx) => (
        <li class="border rounded-lg p-4 bg-slate-50">
          <div class="flex flex-wrap items-center justify-between gap-2 mb-2">
            <div class="flex items-center gap-2">
              <span class="inline-flex h-6 w-6 items-center justify-center rounded-full bg-white text-xs font-semibold border">
                {p.label ?? p.id ?? idx + 1}
              </span>
              {p.title && (
                <span class="font-medium text-sm">{p.title}</span>
              )}
            </div>

            <div class="flex flex-wrap gap-2 items-center">
              {p.difficulty && (
                <span class="rounded-full bg-white px-2 py-0.5 text-[0.7rem] font-medium border text-slate-700 uppercase tracking-wide">
                  Tier {p.difficulty}
                </span>
              )}
              {p.topics && p.topics.length > 0 && (
                <span class="text-[0.7rem] text-gray-500">
                  {p.topics.join(" Â· ")}
                </span>
              )}
            </div>
          </div>

          {/* prompt as markdown/MDX */}
          <div class="prose prose-sm">
            <Fragment set:html={p.prompt} />
          </div>

          {p.solution && (
            <details class="mt-3">
              <summary class="text-xs font-medium text-slate-700 cursor-pointer">
                Show solution
              </summary>
              <div class="mt-2 prose prose-sm">
                <Fragment set:html={p.solution} />
              </div>
            </details>
          )}
        </li>
      ))}
    </ol>
  </section>
)}
