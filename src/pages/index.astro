---
import DocsLayout from "../layouts/DocsLayout.astro"
import { getCollection } from 'astro:content'
const subjects = (await getCollection('subjects')).toSorted((a,b)=>a.data.order-b.data.order)
const macroCourses = (await getCollection('macro-courses')).toSorted((a,b)=>a.data.order-b.data.order)
const courses = (await getCollection('courses')).toSorted((a,b)=>a.data.order-b.data.order)
---
<DocsLayout title="Welcome">
  <h1 class="text-3xl font-bold mb-4">Welcome to your-site</h1>
  <p class="text-gray-700 mb-8">
    A learning site scaffold with subjects, macro-courses, courses, and concepts.
  </p>
  <div class="grid md:grid-cols-3 gap-6">
    <section class="p-5 border rounded-2xl">
      <h2 class="text-lg font-semibold mb-3">Subjects</h2>
      <ul class="list-disc ms-5">
        {subjects.map(s => (
          <li>
            <a class="underline" href={`/subjects/${s.slug}/`}>
              {s.data.title}
            </a>
          </li>
        ))}
      </ul>
    </section>
    <section class="p-5 border rounded-2xl">
      <h2 class="text-lg font-semibold mb-3">Macro-courses</h2>
      <ul class="list-disc ms-5">
        {macroCourses.map(m => (
          <li>
            <a class="underline" href={`/macro-courses/${m.slug}/`}>
              {m.data.title}
            </a>
          </li>
        ))}
      </ul>
    </section>
    <section class="p-5 border rounded-2xl">
      <h2 class="text-lg font-semibold mb-3">Courses</h2>
      <ul class="list-disc ms-5">
        {courses.map(c => (
          <li>
            <a class="underline" href={`/courses/${c.slug}/`}>
              {c.data.code ? `${c.data.code} â€” ${c.data.title}` : c.data.title}
            </a>
          </li>
        ))}
      </ul>
    </section>
  </div>
</DocsLayout>
